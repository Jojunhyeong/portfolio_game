/* src/app/globals.css */
@import "tailwindcss";

/* =========================
   CSS VARIABLES
   ========================= */
:root {
  --font-sans: "Pretendard", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
    "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;

  --bg: 6 8 14;
  --fg: 236 243 255;
  --muted: 180 192 210;

  --panel: 14 16 28;
  --panel-2: 10 12 22;

  --accent: 255 78 205;
  --accent-2: 0 229 255;
  --ok: 64 255 151;

  --leading-default: 1.58;
  --tracking-tight: -0.02em;

  --font-w-regular: 400;
  --font-w-medium: 500;
  --font-w-bold: 700;

  --text-d1: 44px;
  --text-d2: 32px;
  --text-d3: 28px;

  --text-h1: 26px;
  --text-h2: 24px;
  --text-h3: 22px;
  --text-h4: 20px;
  --text-h5: 16px;

  --text-b1: 18px;
  --text-b2: 16px;
  --text-b3: 14px;
  --text-b4: 13px;
  --text-b5: 12px;

  --r: 18px;
}

@media (min-width: 1024px) {
  :root {
    --text-d1: 60px;
    --text-d2: 44px;
    --text-d3: 36px;
  }
}

/* =========================
   BASE
   ========================= */
@layer base {
  html,
  body {
    height: 100%;
  }

  html {
    color-scheme: dark;
  }

  body {
    font-family: var(--font-sans);
    background: rgb(var(--bg));
    color: rgb(var(--fg));
    /* ✅ fixed 깨는 원인 줄이기: relative 제거 */
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  /* 전체 HUD 질감 */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    background: repeating-linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.02) 0px,
      rgba(255, 255, 255, 0.02) 1px,
      rgba(0, 0, 0, 0) 6px
    );
    opacity: 0.22;
    mix-blend-mode: overlay;
  }

  body::after {
    content: "";
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    background:
      radial-gradient(1200px 700px at 50% 20%, rgba(var(--accent-2), 0.05), transparent 60%),
      radial-gradient(900px 600px at 20% 0%, rgba(var(--accent), 0.05), transparent 62%),
      repeating-linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.012) 0px,
        rgba(255, 255, 255, 0.012) 1px,
        rgba(0, 0, 0, 0) 2px,
        rgba(0, 0, 0, 0) 6px
      );
    opacity: 0.35;
    mix-blend-mode: overlay;
  }
}

/* =========================
   TEXT / TYPO
   ========================= */
@utility muted { color: rgb(var(--muted)); }
@utility accent { color: rgb(var(--accent)); }
@utility typo { line-height: var(--leading-default); letter-spacing: var(--tracking-tight); }

/* typography presets */
@utility text-d1 { font-size: var(--text-d1); font-weight: var(--font-w-bold); line-height: 1.08; letter-spacing: var(--tracking-tight); }
@utility text-d2 { font-size: var(--text-d2); font-weight: var(--font-w-bold); line-height: 1.12; letter-spacing: var(--tracking-tight); }
@utility text-d3 { font-size: var(--text-d3); font-weight: var(--font-w-bold); line-height: 1.16; letter-spacing: var(--tracking-tight); }

@utility text-h1 { font-size: var(--text-h1); font-weight: var(--font-w-bold); line-height: 1.22; letter-spacing: var(--tracking-tight); }
@utility text-h2 { font-size: var(--text-h2); font-weight: var(--font-w-bold); line-height: 1.24; letter-spacing: var(--tracking-tight); }
@utility text-h3 { font-size: var(--text-h3); font-weight: var(--font-w-bold); line-height: 1.28; letter-spacing: var(--tracking-tight); }
@utility text-h4 { font-size: var(--text-h4); font-weight: var(--font-w-medium); line-height: 1.32; letter-spacing: var(--tracking-tight); }
@utility text-h5 { font-size: var(--text-h5); font-weight: var(--font-w-medium); line-height: 1.38; letter-spacing: var(--tracking-tight); }

@utility text-b1 { font-size: var(--text-b1); font-weight: var(--font-w-regular); line-height: 1.6; letter-spacing: var(--tracking-tight); }
@utility text-b2 { font-size: var(--text-b2); font-weight: var(--font-w-regular); line-height: 1.62; letter-spacing: var(--tracking-tight); }
@utility text-b3 { font-size: var(--text-b3); font-weight: var(--font-w-regular); line-height: 1.68; letter-spacing: var(--tracking-tight); }
@utility text-b4 { font-size: var(--text-b4); font-weight: var(--font-w-regular); line-height: 1.72; letter-spacing: var(--tracking-tight); }
@utility text-b5 { font-size: var(--text-b5); font-weight: var(--font-w-medium); line-height: 1.76; letter-spacing: var(--tracking-tight); }

/* =========================
   LAYOUT / THEME
   ========================= */
@utility shell {
  max-width: 1100px;
  margin-inline: auto;
  padding-inline: 16px;
  padding-top: 24px;
}
@media (min-width: 768px) {
  .shell { padding-top: 16px; }
}

/* bg-game은 layout.tsx body에 붙여서 켜기 */
@utility bg-game {
  background:
    radial-gradient(1200px 900px at 50% 40%, rgba(0,0,0,0.0), rgba(0,0,0,0.55) 72%, rgba(0,0,0,0.8) 100%),
    radial-gradient(900px 520px at 12% -8%, rgba(var(--accent), 0.22), transparent 60%),
    radial-gradient(820px 480px at 92% 0%, rgba(var(--accent-2), 0.16), transparent 58%),
    radial-gradient(900px 520px at 50% 120%, rgba(255, 255, 255, 0.035), transparent 60%),
    linear-gradient(rgba(255,255,255,0.035) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px),
    rgb(var(--bg));
  background-size: auto, auto, auto, auto, 48px 48px, 48px 48px, auto;
  background-position: center, center, center, center, center, center, center;
}

/* =========================
   PANEL / BUTTON (base)
   ========================= */
@utility panel {
  position: relative;
  background:
    radial-gradient(900px 280px at 50% 0%, rgba(255,255,255,0.06), transparent 55%),
    linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.015)),
    rgba(var(--panel), 0.90);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: var(--r);
  box-shadow:
    0 28px 90px rgba(0, 0, 0, 0.60),
    inset 0 1px 0 rgba(255, 255, 255, 0.07);
  backdrop-filter: blur(12px);
  isolation: isolate;
}

/* 패널 상단 유리 하이라이트(얇게) */
@layer utilities {
  .panel::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: var(--r);
    pointer-events: none;
    background:
      linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.00) 38%);
    opacity: 0.55;
    mix-blend-mode: overlay;
  }
}

/* "움직이는 카드"용 래퍼 (panel + panel-glow 조합 추천) */
@utility panel-glow {
  position: relative;
  overflow: hidden;
  will-change: transform;
  transition-property: transform, filter, box-shadow, background-color, border-color;
  transition-duration: 220ms;
  transition-timing-function: cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* hover 시 살짝 떠오르는 느낌 + 네온 테두리 */
@layer utilities {
  .panel-glow:hover {
    transform: translateY(-2px);
    filter: brightness(1.04);
    box-shadow:
      0 34px 110px rgba(0,0,0,0.66),
      0 0 0 1px rgba(var(--accent-2), 0.16),
      inset 0 1px 0 rgba(255,255,255,0.08);
  }
}


@utility btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)),
    rgba(var(--panel-2), 0.9);
  box-shadow:
    0 14px 40px rgba(0,0,0,0.45),
    inset 0 1px 0 rgba(255,255,255,0.07);
  position: relative;
  transform: translateY(0);
  will-change: transform;
  transition-property: transform, filter, box-shadow, background-color, border-color;
  transition-duration: 160ms;
  transition-timing-function: cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* =========================
   HUD / DOCK (base as @utility)
   ========================= */
@utility hud-top { height: 84px; }

@utility hud-bar {
  position: relative;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: calc(var(--r) + 2px);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)),
    rgba(var(--panel), 0.75);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow:
    0 18px 60px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.08);
  backdrop-filter: blur(12px);
  isolation: isolate;
}

@utility hud-bar-top {
  border-color: rgba(255,255,255,0.16);
  box-shadow:
    0 26px 90px rgba(0,0,0,0.72),
    0 0 0 1px rgba(var(--accent-2), 0.10),
    inset 0 1px 0 rgba(255,255,255,0.10);
}

@utility hud-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 9px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background:
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)),
    rgba(var(--panel-2), 0.85);
  box-shadow:
    0 14px 40px rgba(0,0,0,0.45),
    inset 0 1px 0 rgba(255,255,255,0.07);
  transition: transform 160ms cubic-bezier(0.2, 0.8, 0.2, 1), filter 160ms, box-shadow 160ms, border-color 160ms;
  font-size: var(--text-b5);
  letter-spacing: var(--tracking-tight);
  white-space: nowrap;
}

@utility hud-btn-primary {
  border-color: rgba(var(--accent-2), 0.30);
  box-shadow:
    0 18px 60px rgba(0,0,0,0.55),
    inset 0 1px 0 rgba(255,255,255,0.10),
    0 0 0 1px rgba(var(--accent), 0.10);
}

@utility hud-path {
  font-size: var(--text-b5);
  color: rgb(var(--muted));
  opacity: 0.85;
  white-space: nowrap;
}

@utility hud-chip {
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.20);
  font-size: var(--text-b5);
  white-space: nowrap;
}

@utility hud-chip-online {
  border-color: rgba(var(--ok), 0.30);
  box-shadow:
    0 0 0 1px rgba(var(--ok), 0.10),
    0 0 26px rgba(var(--ok), 0.08);
}

@utility hud-dot-green {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  background: rgba(var(--ok), 0.95);
  box-shadow:
    0 0 10px rgba(var(--ok), 0.55),
    0 0 26px rgba(var(--ok), 0.25);
  position: relative;
}

@utility dock {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px;
  border-radius: 999px;
  background:
    radial-gradient(420px 120px at 50% 0%, rgba(var(--accent-2), 0.10), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)),
    rgba(var(--panel), 0.72);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 18px 60px rgba(0,0,0,0.55);
  backdrop-filter: blur(12px);
}

@utility dock-item {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 999px;
  font-size: var(--text-b5);
  color: rgb(var(--muted));
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.16);
  transition: transform 160ms, filter 160ms, box-shadow 160ms, border-color 160ms;
  white-space: nowrap;
}

@utility dock-item-active {
  color: rgb(var(--fg));
  border-color: rgba(var(--accent-2), 0.35);
  box-shadow:
    0 0 0 1px rgba(var(--accent), 0.12),
    0 0 22px rgba(var(--accent-2), 0.14);
}

@utility dock-ic {
  width: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: rgb(var(--accent-2));
  opacity: 0.9;
}

@utility dock-tx { transform: translateY(-0.5px); }

@utility dock-spacer {
  width: 1px;
  height: 24px;
  background: rgba(255,255,255,0.12);
  margin-inline: 6px;
}

/* =========================
   INTERACTIONS / PSEUDO / KEYFRAMES
   (cannot be @utility cleanly)
   ========================= */
@layer utilities {
  /* ===== Scroll Reveal (safe default) ===== */
  .reveal {
    opacity: 1;
    transform: none;
    filter: none;
  }

  /* 실제 애니메이션을 쓸 때만 숨김 상태로 시작 */
  .reveal[data-reveal="1"] {
    opacity: 0;
    transform: translateY(14px);
    filter: blur(6px);
    will-change: opacity, transform, filter;
    transition:
      opacity 520ms cubic-bezier(0.2, 0.8, 0.2, 1),
      transform 520ms cubic-bezier(0.2, 0.8, 0.2, 1),
      filter 520ms cubic-bezier(0.2, 0.8, 0.2, 1);
  }

  .reveal[data-reveal="1"].reveal-in {
    opacity: 1;
    transform: translateY(0);
    filter: blur(0);
  }

  .d-0 { transition-delay: 0ms; }
  .d-1 { transition-delay: 80ms; }
  .d-2 { transition-delay: 160ms; }
  .d-3 { transition-delay: 240ms; }
  .d-4 { transition-delay: 320ms; }

  @media (prefers-reduced-motion: reduce) {
    .reveal[data-reveal="1"] {
      opacity: 1 !important;
      transform: none !important;
      filter: none !important;
      transition: none !important;
    }
  }

  @layer utilities {
  /* ===== Mount Stagger Reveal (no "disappear") ===== */
  .mount-reveal {
    /* 처음부터 존재는 하되, 살짝 흐릿+아래에서 올라오는 느낌 */
    opacity: 1;
    animation: mountRise 560ms cubic-bezier(0.2, 0.8, 0.2, 1) both;
    will-change: transform, filter, opacity;
  }

  @keyframes mountRise {
    from {
      transform: translateY(14px);
      filter: blur(6px);
      opacity: 0.28; /* ✅ 아예 안 보이는(0) 금지 */
    }
    to {
      transform: translateY(0);
      filter: blur(0);
      opacity: 1;
    }
  }

  /* stagger delay helpers (animation-delay로 동작) */
  .d-0 { animation-delay: 0ms; }
  .d-1 { animation-delay: 90ms; }
  .d-2 { animation-delay: 180ms; }
  .d-3 { animation-delay: 270ms; }
  .d-4 { animation-delay: 360ms; }

  @media (prefers-reduced-motion: reduce) {
    .mount-reveal {
      animation: none !important;
      transform: none !important;
      filter: none !important;
      opacity: 1 !important;
    }
  }
}


  /* btn states */
  .btn:hover {
    transform: translateY(-1px);
    filter: brightness(1.05);
    box-shadow:
      0 18px 55px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.08),
      0 0 0 1px rgba(var(--accent-2), 0.18);
  }
  .btn:active {
    transform: translateY(1px) scale(0.99);
    filter: brightness(1.08);
  }
  .btn:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 2px rgba(var(--accent-2), 0.55),
      0 0 0 6px rgba(var(--accent), 0.14);
  }

  /* hud-btn states */
  .hud-btn:hover {
    transform: translateY(-1px);
    filter: brightness(1.06);
    box-shadow:
      0 18px 55px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,255,255,0.08),
      0 0 0 1px rgba(var(--accent-2), 0.22);
  }
  .hud-btn:active { transform: translateY(1px) scale(0.99); }

  /* dock hover */
  .dock-item:hover {
    transform: translateY(-1px);
    filter: brightness(1.06);
    box-shadow: 0 0 0 1px rgba(var(--accent-2), 0.18);
  }

  /* corner brackets */
  .hud-bar::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: calc(var(--r) + 2px);
    pointer-events: none;
    background:
      linear-gradient(rgba(var(--accent-2),0.55), rgba(var(--accent-2),0.55)) left 12px top 12px / 18px 2px no-repeat,
      linear-gradient(rgba(var(--accent-2),0.55), rgba(var(--accent-2),0.55)) left 12px top 12px / 2px 18px no-repeat,
      linear-gradient(rgba(var(--accent),0.55), rgba(var(--accent),0.55)) right 12px top 12px / 18px 2px no-repeat,
      linear-gradient(rgba(var(--accent),0.55), rgba(var(--accent),0.55)) right 12px top 12px / 2px 18px no-repeat;
    opacity: 0.55;
  }

  /* scanline overlay */
  .hud-bar-top::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius: calc(var(--r) + 2px);
    pointer-events:none;
    z-index: 1;
    background:
      radial-gradient(900px 120px at 50% 0%, rgba(var(--accent-2), 0.14), transparent 60%),
      radial-gradient(700px 140px at 18% 20%, rgba(var(--accent), 0.12), transparent 60%),
      repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,0.035) 0px,
        rgba(255,255,255,0.035) 1px,
        rgba(0,0,0,0) 7px
      );
    opacity: 0.65;
    mix-blend-mode: overlay;
  }
  .hud-bar-top > * { position: relative; z-index: 2; }

  /* green dot pulse */
  .hud-dot-green::after{
    content:"";
    position:absolute;
    inset: -6px;
    border-radius: 999px;
    border: 1px solid rgba(var(--ok), 0.25);
    box-shadow: 0 0 18px rgba(var(--ok), 0.20);
    animation: hudPulse 1.6s ease-in-out infinite;
  }

  @keyframes hudPulse{
    0%   { transform: scale(0.78); opacity: 0.15; }
    50%  { transform: scale(1.08); opacity: 0.40; }
    100% { transform: scale(0.78); opacity: 0.15; }
  }

  /* responsive dock */
  @media (max-width: 640px) {
    .dock-tx { display: none; }
    .dock-item { padding: 10px 12px; }
  }

  /* reduce motion */
  @media (prefers-reduced-motion: reduce){
    .hud-dot-green::after{ animation: none !important; }
  }
}

